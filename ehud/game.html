<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>משחק זיכרון: כדורגלנים</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Assistant', sans-serif;
            touch-action: manipulation; /* Improves touch responsiveness on mobile */
        }

        /* --- Card Flip Animation --- */
        .card {
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden; /* Safari */
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 0.75rem; /* rounded-xl */
        }

        .card-face-front {
            background-color: #1a202c; /* Equivalent to bg-gray-800 */
        }
        
        .card-face-front .football-svg {
             width: 60%;
             height: 60%;
             opacity: 0.5;
        }

        .card-face-back {
            transform: rotateY(180deg);
            background-color: #f7fafc; /* Equivalent to bg-gray-50 */
        }
        
        /* Prevents user from selecting text during rapid clicks */
        .noselect {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari, Chrome, Opera, Edge */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Old versions of Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */
        }

        /* Responsive grid for the cards */
        .game-board {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem; /* gap-3 */
        }

        @media (min-width: 380px) {
            .game-board {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (min-width: 640px) { /* sm breakpoint */
            .game-board {
                grid-template-columns: repeat(4, 1fr);
                gap: 1rem; /* gap-4 */
            }
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4 noselect">

    <div class="w-full max-w-2xl mx-auto">
        <header class="text-center mb-6">
            <h1 class="text-4xl md:text-5xl font-bold text-cyan-400">משחק זיכרון</h1>
            <p class="text-lg text-gray-300">כדורגלני על</p>
        </header>

        <div class="flex items-center justify-between bg-gray-800 p-3 rounded-lg shadow-lg mb-6">
            <button id="restart-button" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
                התחל מחדש
            </button>
            <div class="text-lg">
                <span class="font-bold text-cyan-400">מהלכים:</span>
                <span id="moves-counter" class="font-bold">0</span>
            </div>
        </div>

        <!-- Game Board -->
        <main id="game-board" class="game-board aspect-[4/4] md:aspect-[4/2]">
            <!-- Cards will be generated by JavaScript -->
        </main>
    </div>

    <!-- Win Modal -->
    <div id="win-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center hidden z-50">
        <div class="bg-gray-800 rounded-2xl shadow-2xl p-8 text-center transform scale-95 transition-transform duration-300">
            <h2 class="text-4xl font-bold text-yellow-400 mb-4">כל הכבוד!</h2>
            <p class="text-lg text-gray-200 mb-2">ניצחת את המשחק ב-
                <span id="final-moves" class="font-bold text-white"></span> מהלכים.
            </p>
             <p class="text-lg text-gray-200 mb-6">רוצה לשחק שוב?</p>
            <button id="modal-restart-button" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-3 px-8 rounded-lg text-xl transition-colors">
                משחק חדש
            </button>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const gameBoard = document.getElementById('game-board');
            const movesCounter = document.getElementById('moves-counter');
            const restartButton = document.getElementById('restart-button');
            const winModal = document.getElementById('win-modal');
            const finalMoves = document.getElementById('final-moves');
            const modalRestartButton = document.getElementById('modal-restart-button');

            // --- Player Data ---
            const players = [
                { name: 'ליונל מסי', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Lionel_Messi_WC2022.jpg/800px-Lionel_Messi_WC2022.jpg' },
                { name: 'כריסטיאנו רונאלדו', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/d7/Cristiano_Ronaldo_playing_for_Al_Nassr_FC_on_December_26%2C_2023.jpg/800px-Cristiano_Ronaldo_playing_for_Al_Nassr_FC_on_December_26%2C_2023.jpg' },
                { name: 'ניימאר', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Neymar_Jr._in_2023.jpg/800px-Neymar_Jr._in_2023.jpg' },
                { name: 'קיליאן אמבפה', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Kylian_Mbapp%C3%A9_in_2021.jpg/800px-Kylian_Mbapp%C3%A9_in_2021.jpg' },
                { name: 'פלה', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Pele_by_John_Mathew_Smith.jpg/800px-Pele_by_John_Mathew_Smith.jpg' },
                { name: 'דייגו מראדונה', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Maradona-Mundial_86_con_la_copa.jpg/800px-Maradona-Mundial_86_con_la_copa.jpg' },
                { name: 'זינדין זידאן', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Zinedine_Zidane_by_Tasnim_03.jpg/800px-Zinedine_Zidane_by_Tasnim_03.jpg' },
                { name: 'רונאלדיניו', img: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/Ronaldinho_Ga%C3%BAcho_em_2019.jpg/800px-Ronaldinho_Ga%C3%BAcho_em_2019.jpg' }
            ];

            // --- Game State Variables ---
            let cards = [];
            let flippedCards = [];
            let matchedPairs = 0;
            let moves = 0;
            let canFlip = true;

            // --- Function to Shuffle an Array (Fisher-Yates Algorithm) ---
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // --- Function to Create and Display Cards ---
            function createBoard() {
                // Create pairs and shuffle
                const gameCardsData = shuffle([...players, ...players]);
                
                // Clear existing board
                gameBoard.innerHTML = '';

                // Create card elements
                gameCardsData.forEach(player => {
                    const cardElement = document.createElement('div');
                    cardElement.classList.add('card', 'relative', 'aspect-square');
                    cardElement.dataset.name = player.name;

                    // The placeholder URL to be used if the primary image fails
                    const placeholderUrl = `https://placehold.co/200x250/374151/e5e7eb?text=${encodeURIComponent(player.name)}`;

                    cardElement.innerHTML = `
                        <div class="card-face card-face-front shadow-lg">
                             <svg class="football-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                        </div>
                        <div class="card-face card-face-back flex-col p-2 shadow-lg">
                           <img src="${player.img}" alt="תמונה של ${player.name}" class="w-full h-3/4 object-cover rounded-t-lg" onerror="this.onerror=null;this.src='${placeholderUrl}';">
                           <p class="text-sm md:text-base font-bold text-gray-800 mt-2 text-center flex-grow flex items-center justify-center">${player.name}</p>
                        </div>
                    `;
                    gameBoard.appendChild(cardElement);
                    cards.push(cardElement);
                });
            }

            // --- Main Game Logic ---
            function handleCardClick(e) {
                if (!canFlip) return;
                const clickedCard = e.target.closest('.card');

                // Check if the click is valid
                if (!clickedCard || clickedCard.classList.contains('is-flipped') || flippedCards.length >= 2) {
                    return;
                }

                flipCard(clickedCard);
                flippedCards.push(clickedCard);

                // If two cards are flipped, check for a match
                if (flippedCards.length === 2) {
                    incrementMoves();
                    checkForMatch();
                }
            }

            function flipCard(card) {
                card.classList.add('is-flipped');
            }
            
            function unflipCards() {
                flippedCards.forEach(card => card.classList.remove('is-flipped'));
                flippedCards = [];
                canFlip = true;
            }

            function incrementMoves() {
                moves++;
                movesCounter.textContent = moves;
            }

            function checkForMatch() {
                canFlip = false; // Prevent more flips while checking
                const [card1, card2] = flippedCards;

                if (card1.dataset.name === card2.dataset.name) {
                    // It's a match!
                    setTimeout(() => {
                        card1.classList.add('matched');
                        card2.classList.add('matched');
                        matchedPairs++;
                        flippedCards = [];
                        canFlip = true;
                        
                        // Check for win condition
                        if (matchedPairs === players.length) {
                            showWinModal();
                        }
                    }, 500);
                } else {
                    // Not a match, flip back
                    setTimeout(unflipCards, 1200);
                }
            }

            function showWinModal() {
                 const modal = document.getElementById('win-modal');
                 const finalMovesSpan = document.getElementById('final-moves');
                 const modalContent = modal.querySelector('div');

                 finalMovesSpan.textContent = moves;
                 modal.classList.remove('hidden');
                 
                 // Trigger animation
                 setTimeout(() => {
                    modalContent.style.transform = 'scale(1)';
                 }, 50);
            }

            function hideWinModal() {
                const modal = document.getElementById('win-modal');
                const modalContent = modal.querySelector('div');
                modalContent.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }

            // --- Function to Start/Restart the Game ---
            function startGame() {
                // Reset game state
                cards = [];
                flippedCards = [];
                matchedPairs = 0;
                moves = 0;
                canFlip = true;
                
                movesCounter.textContent = '0';
                
                hideWinModal();
                createBoard();
            }

            // --- Event Listeners ---
            gameBoard.addEventListener('click', handleCardClick);
            restartButton.addEventListener('click', startGame);
            modalRestartButton.addEventListener('click', startGame);

            // --- Initial Game Start ---
            startGame();
        });
    </script>
</body>
</html>
